<% layout('./layouts/boilerplate.ejs') -%>
<body>
    
    <div class="row offset-1">
        <h2>Edit the Listing</h2>
        <form action="http://localhost:8080/listings/<%=lis._id%>/?_method=PUT" method="post" class="needs-validation" novalidate enctype="multipart/form-data">
       
            <div class="mb-3 col-8">
                <label for="title">Title </label>
                <input type="text" name="listing[title]" value="<%=lis.title%>" id="title" class="form-control" required>
                <div class="invalid-feedback">Please enter a valid title</div>
            </div>
            
            <div class="mb-3 col-8">
                <label for="lis-img">Upload new image</label>
                <div>
                    <br>
                    Original image
                    <br>
                    <img src="<%=ogurl%>" alt="listing-image">
                </div>
                <br>
                <input type="file" name="listing-image" id="lis-img" class="form-control">
            </div>

            <div class="mb-3 col-8">
                <label for="category">Category </label>
                <select name="listing[category]" id="category" class="form-control" required>
                    <option value="" disabled>Select a category</option>
                    <option value="farms" <%= lis.category === "farms" ? "selected" : "" %>>Farms</option>
                    <option value="rooms" <%= lis.category === "rooms" ? "selected" : "" %>>Rooms</option>
                    <option value="tropical" <%= lis.category === "tropical" ? "selected" : "" %>>Tropical</option>
                    <option value="pool" <%= lis.category === "pool" ? "selected" : "" %>>Pool</option>
                    <option value="Treehouses" <%= lis.category === "Treehouses" ? "selected" : "" %>>Treehouses</option>
                    <option value="castle" <%= lis.category === "castle" ? "selected" : "" %>>Castle</option>
                    <option value="boat" <%= lis.category === "boat" ? "selected" : "" %>>Boat</option>
                    <option value="trending" <%= lis.category === "trending" ? "selected" : "" %>>Trending</option>
                    <option value="Arctic" <%= lis.category === "Arctic" ? "selected" : "" %>>Arctic</option>
                    <option value="mansion" <%= lis.category === "mansion" ? "selected" : "" %>>Mansion</option>
                </select>
                <div class="invalid-feedback">Please select a valid category</div>
            </div>
            
            <div class="mb-3 col-8">
                <label for="desc">Description </label>
                <textarea name="listing[description]" id="desc" class="form-control" required><%=lis.description%></textarea>
                <div class="invalid-feedback">Please enter a valid description</div>
            </div>
            
            <div class="md-3 col-8">
                <div class="row">
                    <div class="mb-3 col-md-4">
                        <label for="price">Price </label>
                        <input type="number" name="listing[price]" value="<%=lis.price%>" id="price" class="form-control" required>
                        <div class="invalid-feedback">Please enter a valid price</div>
                    </div>
                    
                    <div class="mb-3 col-md-8">
                        <label for="location">Location </label>
                        <input type="text" name="listing[location]" value="<%=lis.location%>" id="location" class="form-control" required>
                        <div class="invalid-feedback">Please enter a valid location</div>
                    </div>
                </div>
            </div>
            
            <div class="mb-3 col-8">
                <label for="country">Country </label>
                <input type="text" name="listing[country]" value="<%=lis.country%>" id="country" class="form-control" required>
                <div class="invalid-feedback">Please enter a valid country</div>
            </div>
        
            <button class="col btn btn-danger button-color">Edit</button>
    
            <br>
            <br>
        </form>
    </div>
    
</body>
